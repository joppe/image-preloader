(function($){"use strict";var defaultListeners={progress:function(){},load:function(){},error:function(){},finish:function(){}},Status;function isCached($image){var cached=false,image=$image.get(0);if(image.complete||image.naturalWidth!==undefined&&image.naturalWidth>0){cached=true}return cached}function preloadImage($image,success,error){var $newImage;if(isCached($image)){success($image)}else{$newImage=$("<img>");$newImage.on({load:function(){success($image)},error:function(){error($image)}});$newImage.prop("src",$image.prop("src"))}}Status=function(){return{create:function(total,listeners){var loaded=0,failed=0;function update(){listeners.progress(loaded,failed,total);if(failed+loaded===total){listeners.finish()}}return{success:function($image){loaded+=1;listeners.load($image);update()},error:function($image){failed+=1;listeners.error($image);update()}}}}}();$.imagePathPreloader=function(imagePaths,listeners){var status;imagePaths=$.isArray(imagePaths)?imagePaths:[imagePaths];listeners=$.extend({},defaultListeners,listeners||{});status=Status.create(imagePaths.length,listeners);$.each(imagePaths,function(index,imagePath){preloadImage($('<img src="'+imagePath+'" />'),status.success,status.error)})};$.fn.imagePreloader=function(listeners){var status=Status.create(this.length,$.extend({},defaultListeners,listeners||{}));return this.each(function(){preloadImage($(this),status.success,status.error)})}})(jQuery);